---
title: "Take-home Exercise 1: Geospatial Analytics for Public Good"
author: "Leng Yi Xiu"
date: "Sep 09 2024"
date-modified: "last-modified"
execute: 
  eval: true
  echo: true
  message: false
  freeze: true
---

# 1 Overview

According to the World Health Organisation (WHO), road traffic accidents claim approximately 1.19 million lives annually and cause 20-50 million non-fatal injuries, with vulnerable road users, such as pedestrians, cyclists, and motorcyclists, accounting for more than half of the fatalities. Road injuries are the leading cause of death for children and young adults (ages 5-29), and two-thirds of all fatalities occur among working-age individuals (18-59).

Low- and middle-income countries experience 90% of these fatalities, despite having only 60% of the worldâ€™s vehicles, with road accidents costing nations 3% of their GDP.

In Thailand, which has some of the deadliest roads globally, approximately 20,000 people die in road accidents each year. Between 2014 and 2021, 19% of these accidents occurred on national highways, with a 66% likelihood of accidents at identified 'black spots,' particularly on straight road segments.

# 2 Objective of Task

The key objective of this exercise is to analyze factors influencing road traffic accidents in the [`Bangkok Metropolitan Region (BMR)`](https://en.wikipedia.org/wiki/Bangkok_Metropolitan_Region) using spatial spatio-temporal point patterns analysis methods.

Previous studies have demonstrated significant potential of Spatial Point Patterns Analysis, but focused on the main behavioural or environmental factors causing traffic accidents. Limited consideration have been given to temporal factors such as (i) season, (ii) day of the week or (iii) time of day.

Specifically, this execise will involve the following objectives:

1.  visualizing the spatio-temporal dynamics of road traffic accidents through statistical graphics and geovisualization techniques,

2.  conducting detailed spatial analysis using Network Spatial Point Patterns Analysis methods, and

3.  performing spatio-temporal analysis using Temporal Network Spatial Point Patterns Analysis methods.

The goal is to explore both behavioral and environmental factors, as well as temporal influences such as season, day of the week, and time of day.

# 3 Preparation

## 3.1 Import Libraries for Use

Load the necessary R packages needed for this study.

```{r}
pacman::p_load(sf, spNetwork, tmap, tidyverse)
```

## 3.2 Import and Setting Up the Data

Load the necessary R packages needed for this study.

::: panel-tabset
## Aspatial

```{r}
acc <- read_csv("data/rawdata/thai_road_accident_2019_2022.csv") %>%
  mutate(Month_num = month(incident_datetime)) %>%
  mutate(Month_fac = month(incident_datetime, 
                           label = TRUE,
                           abbr = TRUE)) %>%
  mutate(dayofweek = day(incident_datetime))
 
   #st_as_sf(coords = c("longitude" , "latitude"),
                      #crs = 4326) %>%
  #st_transform(crs = 32647)  ##confirm if this is for Thailand
```

## Geospatial
:::

```{r}
#write_rds(acc, "data/rds/acc.rds")
```
